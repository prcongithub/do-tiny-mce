'use strict';tinymce.PluginManager.add('AwsS3Upload',function(a,b){var _a$getParam=a.getParam('Awss3UploadSettings'),_a$getParam$buttonTex=_a$getParam.buttonText,g=_a$getParam$buttonTex===void 0?'Upload File':_a$getParam$buttonTex,c=_a$getParam.progress,d=_a$getParam.secondFileSelectedBeforeFirstUpload,f=_a$getParam.fileSelected,h=!1,i=a.targetElm,j=document.createElement('input');j.type='file',j.style.cssText='display:none',i.parentNode.insertBefore(j,i);var k=document.createElement('progress');k.max=100,k.value=10,k.style.cssText='display:none',i.parentNode.insertBefore(k,i),j.addEventListener('change',function(l){l.preventDefault();var m=j.files[0],n=a.contentAreaContainer;m&&(n.parentNode.insertBefore(k,n),c.bar&&'boolean'==typeof c.bar&&(k.style.cssText='display:block;position: absolute;z-index: 9999;width: 120px;height: 15px;right: 10px;top:45px'),h=!0,uploadToServer(m,{progressCallback:function progressCallback(o){var p=parseInt(100*(o.loaded/o.total));k.value=p,c.callback&&'function'==typeof c.callback&&c.callback(p)},successCallback:function successCallback(o){var p=JSON.parse(o.responseText),q=p.attachment.url;h=!1,k.style.cssText='display:none',c.successCallback&&'function'==typeof c.successCallback&&c.successCallback(a,q)},errorCallback:function errorCallback(){h=!1,k.style.cssText='display:none',c.errorCallback&&'function'==typeof c.errorCallback&&c.errorCallback(err)}}))}),a.addButton('AwsS3UploadButton',{text:g,icon:!1,onclick:function onclick(){h?d.callback&&'function'==typeof d.callback?d.callback():alert('Progress allready'):j.click()}})});
